<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Butterfly Image Upload by User</title>
    <!-- Use one Bootstrap CDN and your local CSS as needed -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/iconbar.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/upload.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Upload</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item font-weight-bold">
                        <a class="nav-link menu-apps-home" href="home.html">
                            <i class="fas fa-home"></i><span> Home</span>
                        </a>
                    </li>
                    <li class="nav-item font-weight-bold">
                        <a class="nav-link menu-apps-home" href="userprofile.html">
                            <i class="fas fa-user"></i><span> Profile</span>
                        </a>
                    </li>
                    <li class="nav-item font-weight-bold">
                        <a href="#" class="nav-link menu-apps-home">
                            <i class="fa fa-inbox" aria-hidden="true"></i><span> Inbox</span>
                        </a>
                    </li>
                    <li class="nav-item font-weight-bold">
                        <a href="#" class="nav-link menu-apps-home">
                            <i class="fas fa-user-friends" aria-hidden="true"></i><span> Social</span>
                        </a>
                    </li>
                    <li class="nav-item font-weight-bold">
                        <a class="nav-link menu-apps-home" href="about.html">
                            <i class="fa fa-info-circle" aria-hidden="true"></i><span> About</span>
                        </a>
                    </li>
                    <li class="nav-item font-weight-bold">
                        <a class="nav-link menu-apps-home" href="setting.html">
                            <i class="fas fa-cog" aria-hidden="true"></i><span> Setting</span>
                        </a>
                    </li>
                    <li class="nav-item font-weight-bold">
                        <a class="nav-link menu-apps-home" href="logout.html">
                            <i class="fas fa-sign-out-alt" style="font-size:10px"></i> Log out
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5 pt-5">
        <h5>Upload Image</h5>
        <input type="file" id="imageUpload" accept="image/*">
        <div id="output"></div>
        <div class="mt-2">
            <button class="btn btn-primary" onclick="processImage()">Upload</button>
            <a href="classification.html" class="btn btn-secondary ml-2">Camera</a>
        </div>
    </div>

    <div class="container mt-4">
        <h5>Butterfly Image Data</h5>
        <div class="text-center mb-2">
            <input type="text" id="myInput" onkeyup="filterTable()" placeholder="Search for names.." class="form-control">
        </div>
        <div class="table-wrapper">
            <form id="uploadForm" method="get" accept-charset="utf-8">
                <table id="butterflyTable" class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Uploader Name</th>
                            <th>Upload Reference ID</th>
                            <th>Activity</th>
                            <th>Percent %</th>
                            <th>Upload Image</th>
                            <th>Size</th>
                            <th>Mime Type</th>
                            <th>Last Modified</th>
                            <th>Content</th>
                            <th>Date</th>
                            <th>Location</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="imageTableBody">
                        <!-- Rows will be added here by JavaScript -->
                    </tbody>
                </table>
            </form>
        </div>
    </div>

    <script>
        function filterTable() {
            var input = document.getElementById("myInput");
            var filter = input.value.toUpperCase();
            var table = document.getElementById("butterflyTable");
            var tr = table.getElementsByTagName("tr");

            for (var i = 1; i < tr.length; i++) { // Start at 1 to skip header
                var td = tr[i].getElementsByTagName("td")[0];
                if (td) {
                    var txtValue = td.textContent || td.innerText;
                    tr[i].style.display = txtValue.toUpperCase().indexOf(filter) > -1 ? "" : "none";
                }
            }
        }

        function processImage() {
            const predOutput = [
                { commonName: 'Butterfly-Clippers', scientificName: 'Parthenos sylvia', discoveredBy: 'Cramer', year: '1775', family: 'Nymphalidae', larvalHostPlant: 'Adenia' },
                { commonName: 'Butterfly-Common Jay', scientificName: 'Graphium doson', discoveredBy: 'C. & R. Felder', year: '1864', family: 'Papilionidae', larvalHostPlant: 'Annona' },
                { commonName: 'Butterfly-PLAIN TIGER or AFRICAN MONARCH', scientificName: 'Danaus chrysippus', discoveredBy: 'Linnaeus', year: '1758', family: 'Nymphalidae Danainae Danaini', larvalHostPlant: 'Calotropis' },
                // ... add more species as desired
            ];
            const imgInput = document.getElementById('imageUpload');
            const outputDiv = document.getElementById('output');
            outputDiv.innerHTML = '';

            if (imgInput.files && imgInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const imgElement = document.createElement('img');
                    imgElement.src = e.target.result;
                    imgElement.style.width = '224px';
                    imgElement.style.height = '224px';
                    outputDiv.appendChild(imgElement);

                    // Simulate a prediction
                    const randomIndex = Math.floor(Math.random() * predOutput.length);
                    const prediction = predOutput[randomIndex];

                    // Display prediction details
                    const details = `
                        <p>Common Name: ${prediction.commonName}</p>
                        <p>Scientific Name: ${prediction.scientificName}</p>
                        <p>Discovered By: ${prediction.discoveredBy} (${prediction.year})</p>
                        <p>Family: ${prediction.family}</p>
                        <p>Larval Host Plant: ${prediction.larvalHostPlant}</p>
                    `;
                    outputDiv.innerHTML += details;
                };
                reader.readAsDataURL(imgInput.files[0]);
            }
        }

        document.getElementById('imageUpload').addEventListener('change', processImage);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/activity.js"></script>
    <script src="js/slider.js"></script>
</body>
</html>